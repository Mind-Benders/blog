var c=i=>{let n=document.createElement("div");n.className="gallery";let o=i[0].parentNode,t=i[0];o.insertBefore(n,t);for(let e of i)n.appendChild(e)},d=i=>i.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),m=i=>{let n=i.querySelectorAll("img.gallery-image");for(let e of Array.from(n)){let s=e.closest("p");if(!s||!i.contains(s)||(s.textContent.trim()==""&&s.classList.add("no-text"),!s.classList.contains("no-text")))continue;let p=e.parentElement.tagName=="A",r=e,l=document.createElement("figure");if(l.classList.add("gallery-image"),l.style.setProperty("flex-grow",e.getAttribute("data-flex-grow")||"1"),l.style.setProperty("flex-basis",e.getAttribute("data-flex-basis")||"0"),p)r=e.parentElement,r.classList.add("image-link"),r.setAttribute("data-pswp-width",e.getAttribute("width")),r.setAttribute("data-pswp-height",e.getAttribute("height"));else{let a=document.createElement("a");a.href=e.src,a.setAttribute("class","image-link"),a.setAttribute("target","_blank"),a.setAttribute("data-pswp-width",e.getAttribute("width")),a.setAttribute("data-pswp-height",e.getAttribute("height")),e.parentNode.insertBefore(a,e),a.appendChild(e),r=a}r.parentElement.insertBefore(l,r),l.appendChild(r);let g=e.getAttribute("alt");if(e.getAttribute("data-title-escaped")&&(g=d(e.getAttribute("data-title-escaped"))),g){let a=document.createElement("figcaption");a.innerHTML=g,l.appendChild(a)}}let o=i.querySelectorAll("figure.gallery-image"),t=[];for(let e of Array.from(o))t.length?e.previousElementSibling===t[t.length-1]?t.push(e):t.length&&(c(t),t=[e]):t=[e];t.length>0&&c(t)};export{m as default};
